<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="utf-8" />
	<title>TazLito-Handbuch — SliTaz Live Tool</title>
	<link rel="shortcut icon" href="favicon.ico" />
	<link rel="stylesheet" type="text/css" href="../slitaz-doc.css" />
	<script type="text/javascript" src="../slitaz-doc.js"></script>
</head>
<body>

<header>
	<h1>Tazlito-Handbuch</h1>
</header>

<!-- Start content -->
<div id="content">

<h2>NAME</h2>

<p>Tazlito — SliTaz Live Tool.</p>


<h2>SYNTAX</h2>

<pre>
tazlito [command] [list|iso|flavor] [dir]
</pre>


<h2>BESCHREIBUNG</h2>

<p>Tazlito ist ein kleines Programm zum Extrahieren eines Direktstart-ISO-Abbildes, Neuerstellen des
ISO-Abbildes und regenerieren des Wurzel-Dateisystems eines Direktstart-ISO-Abbildes. Mit Tazlito kann
auch anhand einer Liste vorher transferierter Pakete eine Distribution erzeugt werden. Tazlito
liest die Konfigurationsdatei <tt>/etc/tazlito/tazlito.conf</tt> oder eine (leicht zu erstellende)
eigene Konfigurationsdatei <tt>tazlito.conf</tt> im Arbeitsverzeichnis. Darin werden
der Name des ISO-Abbildes, der Kennsatz für das ISO-Abbild, der Name des Betreuers und die Pfade der
Paketdateien und des zu erzeugenden ISO-Abbildes festgelegt. Tazlito kann auch zusätzliche Dateien
aus einem Verzeichnis in das ISO-Abbild übernehmen.</p>
<p>Tazlito wird unter der freien GNU-Lizenz GPL v.3 verbreitet und ist standardmäßig auf SliTaz installiert.
Ebenso wurde es erfolgreich auf Debian GNU/Linux getestet. Weitere Informationen
finden Sie im <a href="http://doc.slitaz.org/de:handbook:genlivecd">Handbuch</a>.</p>

<h2>KOMMANDOS</h2>


<h3 id="usage">usage</h3>

<p>Mit dem Kommando <code>usage</code> wird eine Übersicht der verfügbaren Kommandos mitsamt 
einer Kurzbeschreibung ausgegeben:</p>

<pre>
# tazlito usage
</pre>


<h3 id="stats">stats</h3>

<p>Mit dem Kommando <code>stats</code> werden die Konfigurationsvariablen, die Pfade verschiedener
Dateien und Verzeichnisse sowie Informationen über das ISO-Abbild ausgegeben:</p>

<pre>
# tazlito stats
</pre>


<h3 id="gen-config">gen-config</h3>

<p>Mit dem Kommando <code>gen-config</code> wird eine Konfigurationsdatei erstellt, 
die dann modifiziert werden kann. Standardmäßig wird diese Datei im Arbeitsverzeichnis erstellt, 
es kann aber auch ein anderes Verzeichnis angegeben werden:</p>

<pre>
# tazlito gen-config
# tazlito gen-config <em>/path/to/distro</em>
</pre>


<h3 id="configure">configure</h3>

<p>Mit dem Kommando <code>configure</code> kann die globale Konfigurationsdatei oder eine 
Konfigurationsdatei im Arbeitsverzeichnis modifiziert werden:</p>

<pre>
# tazlito configure
</pre>


<h3 id="gen-iso">gen-iso</h3>

<p>Mit dem Kommando <code>gen-iso</code> kann ein neues Direkstart-ISO-Abbild unter 
Berücksichtigung von Änderungen und zusätzlichen Dateien für das Wurzel-Dateisystem erzeugt werden.
Damit dies funktioniert, muss der Verzeichnisbaum eines Direkstartsystems zugreifbar sein.
Dieser Verzeichnisbaum kann leicht mit dem Kommando
<a href="#extract-distro"><code>extract-distro</code></a> erstellt werden. Nach Änderungen darin
wird ein neues ISO-Abbild erzeugt mit:</p>

<pre>
# tazlito gen-iso
</pre>


<h3 id="gen-initiso">gen-initiso</h3>

<p>Mit dem Kommando <code>gen-initiso</code> wird dasselbe erreicht wie mit
<code>gen-iso</code>, nur dass zunächst initramfs neu erstellt wird.
initramfs enthält das Wurzel-Dateisystem und muss nach jeder Änderung neu erstellt werden:</p>

<pre>
# tazlito gen-initiso
</pre>


<h3 id="list-flavors">list-flavors</h3>

<p>Mit dem Kommando <code>list-flavors</code> wird eine Liste verfügbarer 
Varianten (falls erforderlich) transferiert und angezeigt.
Mit der Option <code>--recharge</code> wird die Liste in jedem Fall transferiert:</p>

<pre>
# tazlito list-flavors
# tazlito list-flavors --recharge
</pre>


<h3 id="get-flavor">get-flavor</h3>

<p>Mit dem Kommando <code>get-flavor</code> werden die Dateien zum Erstellen einer Variante
mit <a href="#gen-distro"><code>gen-distro</code></a> (falls erforderlich) transferiert und
vorbereitet:</p>

<pre>
# tazlito get-flavor <em>particular-flavor</em>
</pre>


<h3 id="show-flavors">show-flavor</h3>

<p>Mit dem Kommando <code>show-flavor</code> wird die Beschreibung einer Variante und deren
Größe nach Neuerstellung angezeigt. Mit den Optionen <code>--brief</code> und
<code>--noheader</code> wird der Umfang der Ausgabe reduziert:</p>

<pre>
# tazlito show-flavor <em>particular-flavor</em>
# tazlito show-flavor <em>particular-flavor</em> --brief
# tazlito show-flavor <em>particular-flavor</em> --brief --noheader
</pre>


<h3 id="gen-flavor">gen-flavor</h3>

<p>Mit dem Kommando <code>gen-flavor</code>  wird eine Datei mit der Beschreibung einer neuen
Variante aus den Ergebnissen der Erzeugung einer Distribution 
(mit <a href="#gen-distro"><code>gen-distro</code></a>) erstellt. Die Datei <tt>.flavor</tt>
kann dann an slitaz.org gesendet werden:</p>

<pre>
# tazlito gen-flavor <em>new-flavor</em>
</pre>


<h3 id="gen-liveflavor">gen-liveflavor</h3>

<p>Mit dem Kommando <code>gen-liveflavor</code>  wird eine Datei mit der Beschreibung einer neuen
Variante aus den Ergebnissen der Erzeugung einer Distribution basierend auf dem laufenden System erstellt.
Die Option <code>--help</code> liefert weitere Informationen:</p>

<pre>
# tazlito gen-liveflavor
# tazlito gen-liveflavor --help
</pre>


<h3 id="upgrade-flavor">upgrade-flavor</h3>

<p>Mit dem Kommando <code>upgrade-flavor</code> aktualisiert eine Datei <tt>.flavor</tt>, indem
in die Paketliste die neuesten verfügbaren Versionen eingetragen werden:</p>

<pre>
# tazlito upgrade-flavor <em>this-flavor</em>
</pre>


<h3 id="extract-flavor">extract-flavor</h3>

<p>Mit dem Kommando <code>extract-flavor</code> wird eine Variante in eine leicht zu modifizierende
Baumstruktur in <tt>/home/slitaz/VERSION/flavors</tt> konvertiert, die mit mercurial verwaltet
werden kann:
<a href="http://hg.slitaz.org/flavors">http://hg.slitaz.org/flavors</a>. Für z.B.
cooking wird das Arbeitsverzeichnis in <tt>/home/slitaz/cooking</tt> sein.</p>

<pre>
# tazlito extract-flavor <em>this-flavor</em>
</pre>


<h3 id="pack-flavor">pack-flavor</h3>

<p>Mit dem Kommando <code>pack-flavor</code> wird eine Baumstruktur aus 
<tt>/home/slitaz/VERSION/flavors</tt> in eine Datei <tt>.flavor</tt> konvertiert.
Dies ist die umgekehrte Funktion von
<a href="#extract-flavor"><code>tazlito extract-flavor</code></a>:</p>

<pre>
# tazlito pack-flavor <em>this-flavor</em>
</pre>


<h3 id="extract-distro">extract-distro</h3>

<p>Mit dem Kommando <code>extract-distro</code> werden Dateien aus einem ISO-Abbild für einen
Direktstart-Datenträger extrahiert, um die Wurzelverzeichnisse des optischen Datenträgers
und des Systems zu erzeugen. Darin können dann die gewünschten Änderungen oder 
Erweiterungen vorgenommen werden und das ISO-Abbild mit
<a href="#gen-iso"><code>gen-iso</code></a> oder
<a href="#gen-initiso"><code>gen-initiso</code></a> neu erstellt werden. Beispiel:</p>

<pre>
# tazlito extract-distro <em>slitaz-cooking.iso</em>
</pre>


<h3 id="gen-distro">gen-distro</h3>

<p>Mit dem Kommando <code>gen-distro</code> kann der Verzeichnisbaum einer Distribution und
ein ISO-Abbild gemäß einer Paketliste erzeugt werden. Hierzu wird eine Paketliste, ein
Verzeichnis, das alle Pakete (<tt>.tazpkg</tt>) aus der Liste enthält und ein Verzeichnis
für die Erstellung der Distribution benötigt. Die Paketliste kann aus der Variante
mit dem Kommando <a href="#get-flavor"><code>get-flavor</code></a> extrahiert werden. 
Wenn ein optischer Datenträger mit einem Direktstartsystem verwendet wird,
ermöglichen die Optionen <code>--cdrom</code> und <code>--iso=</code> die
Wiederherstellung von Paketen, die Dateien im Verzeichnis <tt>/boot</tt> ablegen, ohne dass
diese von einem Depot transferiert werden müssen und stellt die zusätzlichen Dateien des optischen
Datenträgers wieder her.
Die Pfade der verschiedenen Verzeichnisse sind in der Konfigurationsdatei festgelegt und
Pakete können von SliTaz-Depots transferiert werden oder mit Cookutils erstellt werden.
Eine Distribution erzeugen:</p>

<pre>
# tazlito gen-distro
# tazlito gen-distro --cdrom
# tazlito gen-distro --iso=<em>slitaz.iso</em>
# tazlito gen-distro <em>package-list</em>
</pre>


<h3 id="clean-distro">clean-distro</h3>

<p>Mit dem Kommando <code>clean-distro</code> werden alle erzeugten und aus dem ISO-Abbild
extrahierten Dateien gelöscht:</p>

<pre>
# tazlito clean-distro
</pre>


<h3 id="check-distro">check-distro</h3>

<p>Mit dem Kommando <code>check-distro</code> wird geprüft, ob mit den Paketen installierte
Dateien vorhanden sind:</p>

<pre>
# tazlito check-distro
</pre>


<h3 id="writeiso">writeiso</h3>

<p>Mit dem Kommando <code>writeiso</code> wird das aktuelle Dateisystem in ein cpio-Archiv
(<tt>rootfs.gz</tt>) gepackt und anschließend ein urladefähiges ISO-Abbild erzeugt. Writeiso kann sowohl
in einem auf Platte installierten SliTaz als auch in einem Direktstartsystem verwendet werden.
Auch das aktuelle Verzeichnis <tt>/home</tt> wird in das Archiv übernommen.
Damit ist es auf einfache Weise möglich, ein eigenes, angepasstes ISO-Abbild für optische Datenträger
zu erstellen. Einfach ein SliTaz-System laden, irgendwelche Dateien ändern und dann:</p>

<pre>
# tazlito writeiso [gzip|lzma|none]
# tazlito writeiso gzip
# tazlito writeiso gzip <em>image-name</em>
</pre>

<h3 id="check-list">check-list</h3>

<p>Mit dem Kommando <code>check-list</code> wird geprüft, ob die Datei <tt>distro-packages.list</tt> die
aktuellen Paketversionen enthält:</p>

<pre>
# tazlito check-list
</pre>


<h3 id="repack">repack</h3>

<p>Mit dem Kommando <code>repack</code> wird das Wurzel-Dateisystem (rootfs) mit der höchstmöglichen
Kompressionsrate neu komprimiert:</p>

<pre>
# tazlito repack <em>slitaz.iso</em>
</pre>


<h3 id="merge">merge</h3>

<p>Mit dem Kommando <code>merge</code> werden verschiedene Varianten wie russische Puppen verschachtelt.
Jedes Wurzel-Dateisystem ist eine Teilmenge des vorherigen.
Das erste Wurzel-Dateisystem wird von dem ISO-Abbild im dritten Argument extrahiert.
Dann wird in Abhängigkeit vom verfügbaren Arbeitsspeicher die entsprechende Variante zum Laden ausgewählt.:</p>

<pre>
# tazlito merge <em>160M slitaz-core.iso 96M rootfs-justx.gz 32M rootfs-base.gz</em>
</pre>


<h3 id="build-loram">build-loram</h3>

<p>Mit dem Kommando <code>build-loram</code> wird aus einem ISO-Abbild ein ISO-Abbild
für Rechner mit kleinem Arbeitsspeicher erzeugt. Es kann eine Variante erzeugt werden,
bei der das Dateisystem <tt>/</tt> sich stets im Arbeitsspeicher befindet oder wo es
sich auf dem optischen Datenträger befindet:</p>

<pre>
# tazlito build-loram <em>slitaz.iso loram.iso</em>
# tazlito build-loram <em>slitaz.iso loram-cdrom.iso</em> cdrom
</pre>


<h3 id="emu-iso">emu-iso</h3>

<p>Mit dem Kommando <code>emu-iso</code> wird der Emulator Qemu zum Laden von
SliTaz verwendet. Qemu kann verwendet werden, um ein neu erstelltes ISO-Abbild zu testen,
ohne dass es auf optischen Datenträger geschrieben werden muss oder dass eine
sparsame Installation vorgenommen werden muss:</p>

<pre>
# tazlito emu-iso
# tazlito emu-iso path/to/image.iso
</pre>


<h3 id="burn-iso">burn-iso</h3>

<p>Mit dem Kommando <code>burn-iso</code> wird ein optisches Laufwerk ermittelt und seine
Geschwindigkeit festgestellt. Dann wird mit wodim (Bestandteil von cdrkit) das ISO-Abbild auf
einen optischen Datenträger geschrieben. Das Standard-ISO-Abbild ist das aus der
aktuellen Konfigurationsdatei, aber es kann auch ein anderes angegeben werden:</p>

<pre>
# tazlito burn-iso
# tazlito burn-iso <em>slitaz-hacked.iso</em>
</pre>


<h2>VARIANTEN</h2>

<p>Eine Datei <tt>.flavor</tt> enthält lediglich einige wenige KB Informationen, die zum
(Wieder-)Erstellen eines angepassten SliTaz-Direkstart-ISO-Abbildes für optischen Datenträger
benötigt werden.</p>


<h3 id="rebuild-flavor">Eine Variante erstellen</h3>

<p>Aus den vorhandenen Varianten kann eine zum (Wieder-)Erstellen ausgewählt werden:</p>

<pre>
# tazlito list-flavors

List of flavors
================================================================================
Name              ISO   Rootfs  Description
================================================================================
base               6.9M  13.1M  Minimal set of packages to boot
core-3in1         31.5M 105.6M  SliTaz core system with justX and base alternatives
core              31.5M 104.6M  SliTaz core system
eeepc             31.2M 105.4M  SliTaz eeepc system
justX             16.1M  51.2M  SliTaz with a minimal X environment
</pre>

<p>Wir beginnen mit der (Wieder-)Erstellung der Variante <em>eeepc</em>, die 105,4 MB
Arbeitsspeicher benötigt und auf dem Datenträger 31,2 MB belegt:</p>

<pre>
# tazlito clean-distro
# tazlito get-flavor <em>eeepc</em>
# tazlito gen-distro
</pre>


<h3 id="create-flavor">Eine Variante erzeugen</h3>

<p>Um eine Variante zu erzeugen, muss:</p>

<ul>
	<li>Entweder ein ISO-Abbild mit <a href="#gen-distro"><code>tazlito gen-distro</code></a>
                erzeugt werden und dann eine Datei <tt>.flavor</tt> mit
		<a href="#gen-flavor"><code>tazlito gen-flavor</code></a></li>
	<li>Oder direkt eine Baumstruktur erzeugt werden, die eine Variante definiert
		(siehe <a href="#extract-flavor"><code>tazlito extract-flavor</code></a>)
		und dann eine Datei <tt>.flavor</tt> mit
                <a href="#pack-flavor"><code>tazlito pack-flavor</code></a></li>
	<li>Oder der <a href="http://pizza.slitaz.org/">"online builder"</a> verwendet werden</li>
</ul>


<h3 id="publish-flavor">Eine Variante veröffentlichen</h3>

<p>Da eine Datei <tt>.flavor</tt> nur einige wenige KB groß ist, kann sie einfach über
die <a href="http://www.slitaz.org/en/mailing-list.php">"mailing list"</a> verbreitet werden.</p>

<p>Die Ergebnisse von <a href="#extract-flavor"><code>tazlito extract-flavor</code></a>
können auch in das
<a href="http://hg.slitaz.org/flavors">"mercurial repository"</a> transferiert werden. Dieses Verfahren ist
vorzuziehen, da der Baum direkt im
<a href="http://hg.slitaz.org/flavors/file/tip">"mercurial web interface"</a> sichtbar wird.</p>
<p>Dieser Baum enthält:</p>

<ul>
	<li>Eine Datei <b>receipt</b>, die die Variante über die folgenden Variablen beschreibt:
		<ul>
			<li>FLAVOR: Der Name der Variante.</li>
			<li>SHORT_DESC: Kurzbeschreibung.</li>
			<li>VERSION: Freies Format.</li>
			<li>MAINTAINER: Email-Adresse des Betreuers.</li>
			<li>FRUGAL_RAM: Mindestgröße des benötigten Arbeitsspeichers (optional).</li>
			<li>ROOTFS_SIZE: Größe des entpackten rootfs.gz im Arbeitsspeicher
				(optional).</li>
			<li>INITRAMFS_SIZE: Größe von rootfs.gz auf dem Datenträger (optional).</li>
			<li>ISO_SIZE: Größe des ISO-Abbildes auf dem Datenträger (optional).</li>
			<li>ROOTFS_SELECTION: Optional, siehe
                                <a href="#meta-flavor">Meta-Variante</a> unten.</li>
		</ul>
	</li>
	<li>Die Datei <b>packages.list</b>, die die Liste der Pakete ohne Versionsangabe
		enthält (tazlito verwendet die neueste verfügbare). Diese Datei
		fehlt, wenn ROOTFS_SELECTION im Rezept angegeben ist.</li>
	<li>Die optionale Datei <b>mirrors</b>, die eine Liste inoffizieller (undigest)
		Depots  enthält, aus denen persönliche Pakete installiert werden können.</li>
	<li>Das optionale Verzeichnis <b>rootfs</b>, das den Baum enthält, der dem Wurzel-Dateisystem
		rootfs.gz hinzugefügt werden soll (üblicherweise Konfigurationsdateien).</li>
	<li>Das optionale Verzeichnis <b>rootcd</b> , das den Baum enthält, der dem Wurzel-Dateisystem
                des optischen Datenträgers hinzugefügt werden soll.</li>
</ul>


<h3 id="tune-flavor">Eine Variante anpassen</h3>

<p>Es ist meist einfacher, eine vorhandene Variante zu modifizieren als eine Variante von Grund
auf neu zu erstellen. Im folgenden Beispiel wird die Variante <em>eeepc</em> angepasst:</p>

<pre>
# tazpkg get-install mercurial
# cd /home/slitaz
# hg clone http://hg.slitaz.org/flavors
# cd flavors
# cp -a <em>eeepc myslitaz</em>
</pre>

<p>Dann können Dateien im Verzeichnis <tt>myslitaz</tt> geändert werden und mit</p>

<pre>
# tazlito pack-flavor <em>myslitaz</em>
</pre>

<p>wird eine neue Variante erzeugt.</p>

<p>Tipp: Die Installation von mercurial wie im vorherigen Beispiel ist nicht erforderlich.
Es genügen die Kommandos:</p>

<pre>
# tazlito get-flavor <em>eeepc</em>
# tazlito extract-flavor <em>eeepc.flavor</em>
# cd /home/slitaz/flavors
# cp -a <em>eeepc myslitaz</em>
</pre>


<h3 id="meta-flavor">Meta-Variante</h3>

<p>Eine Meta-Variante enthält mehrere verschachtelte Varianten, wie russische Puppen. Es wird
die Variante geladen, für die genügend Arbeitsspeicher vorhanden ist.
Die Variable ROOTFS_SELECTION legt die Mindestgrößen an Arbeitsspeicher für die entsprechenden
Varianten fest, <ahref="http://hg.slitaz.org/flavors/file/tip/core-4in1/receipt">Beispiel</a>:</p>

<pre>
ROOTFS_SELECTION="160M core 96M justX 32M base"
</pre>

<p>Eine Meta-Variante enthält keine Paketliste (<tt>packages.list</tt>).
Meta-Varianten werden von SliTaz-Kernen vor Version 2.6.30 nicht unterstützt.</p>


<h2>BETREUER</h2>

<p>Christophe Lincoln &lt;pankso at slitaz.org&gt;<br />
Pascal Bellard &lt;pascal.bellard at slitaz.org&gt;</p>

<!-- End content -->
</div>

<footer>
	Copyright &copy; <span class="year"></span> <a href="http://www.slitaz.org/">SliTaz GNU/Linux</a>
</footer>

</body>
</html>
